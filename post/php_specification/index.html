<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PHP代码规范-初版 | Pota Blog</title><meta name=keywords content="PHP"><meta name=description content="HP代码规范-初版"><meta name=author content="wrpota"><link rel=canonical href=https://www.potawang.cn/php_specification><link crossorigin=anonymous href=/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.106.0"><meta name=baidu-site-verification content="code-0ekyOXOMm0"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?dcdb96e6d8ef04e6ae19d0a74a1063c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="PHP代码规范-初版"><meta property="og:description" content="HP代码规范-初版"><meta property="og:type" content="article"><meta property="og:url" content="https://www.potawang.cn/post/php_specification/"><meta property="og:image" content="https://www.potawang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-07-02T16:51:10+08:00"><meta property="article:modified_time" content="2021-07-02T16:51:10+08:00"><meta property="og:site_name" content="Pota Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.potawang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="PHP代码规范-初版"><meta name=twitter:description content="HP代码规范-初版"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.potawang.cn/post/"},{"@type":"ListItem","position":2,"name":"PHP代码规范-初版","item":"https://www.potawang.cn/post/php_specification/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PHP代码规范-初版","name":"PHP代码规范-初版","description":"HP代码规范-初版","keywords":["PHP"],"articleBody":"1.编码规范 PHP 代码文件 必须 以 \u003c?php 或 \u003c?= 标签开始； PHP 代码文件 必须 以 不带 BOM 的 UTF-8 编码； PHP 代码中 应该 只定义类、函数、常量等声明， 或其他会产生 副作用 的操作（如：生成文件输出以及修改 .ini 配置文件等），二者只能选其一； 命名空间以及类 必须 符合 PSR 的自动加载规范： [PSR-0（已废弃）或 PSR-4] 中的一个。 类的命名 必须 遵循 StudlyCaps 大写开头的驼峰命名规范； 类中的常量所有字母都 必须 大写，单词间用下划线分隔； 方法名称 必须 符合 camelCase 式的小写开头驼峰命名规范。 单一文件只能申明单个类 1.类的常量、属性和方法 此处的「类」指代所有的类、接口以及可复用代码块（traits）。\n1.1常量 类的常量中所有字母都 必须 大写，词间以下划线分隔。例如：\n\u003c?php namespace Vendor\\Model; class Foo { const VERSION = '1.0'; const DATE_APPROVED = '2012-06-01'; } 1.2.属性 类的属性命名 可以 遵循： 大写开头的驼峰式 ($StudlyCaps) 小写开头的驼峰式 ($camelCase) 下划线分隔式 ($under_score) 本规范不做强制要求，但无论遵循哪种命名方式，都 应该 在一定的范围内保持一致。这个范围可以是整个团队、整个包、整个类或整个方法。 1.3.方法 方法名称 必须 符合 camelCase() 式的小写开头驼峰命名规范。 1.4.注释 所有的类都 必须 添加大概说明、创建者、创建日期 切放在namespace申明前 并空一行。例:\n\u003c?php /** * 类说明 * * User: pota * DateTime: 2018/11/15 5:37 PM */ namespace Example; 方法注释 必须 采用doc风格注释。例:\n/** * 方法说明 * * @param int $param 参数说明 * @throw \\Exception 若有异常抛出 需申明抛出异常类型 * @return bool true 成功 false 失败 //强制必须申明所返回参数类型 若有必要需说明返回参数说明(非强制) */ public function action(int $param): bool { //类主体 } 类属性和参数需说明参数类型以及参数说明。例:\n/** * 参数说明 * * @var array */ public $param = array(); 方法内部单行注释，在被注释语句上方另起一行，使用//\u003c...\u003e注释。方法内部多行注释 使用/* \u003c...\u003e */注释，注意与代码对齐。\n代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻 辑等的修改。\n注释类型申明可以使用以下类型\nbool：此类型适用的元素仅具有状态TRUE或FALSE。 int：此类型适用的元素是整数或整数。 float：此类型适用的元素是连续或实数。 string：此类型适用的元素是二进制字符串。 object：此类型适用的元素是未确定类的实例。 array：此类型适用的元素是值数组。 iterable：此类型适用的元素是每个PHP定义的数组或Traversable对象。 resource：此类型适用的元素是每个PHP定义的资源。 mixed：此类型适用的元素可以是此处指定的任何类型。在编译时不知道将使用哪种类型。 void：此类型通常仅在定义方法或函数的返回类型时使用，指示“未返回任何内容”，因此用户不应依赖任何返回的值。 2.文件 2.1. PHP 标签 PHP 代码 必须 使用 \u003c?php ?\u003e 长标签 或 \u003c?= ?\u003e 短输出标签；一定不可 使用其它自定义标签。 2.2. 字符集编码 PHP 代码 必须 且只可使用 不带 BOM 的 UTF-8 编码。 2.3. 副作用 一份 PHP 文件中 应该 要不就只定义新的声明，如类、函数或常量等不产生 副作用 的操作，要不就只书写会产生 副作用 的逻辑操作，但 不该 同时具有两者。\n「副作用」(side effects) 一词的意思是，仅仅通过包含文件，不直接声明类、函数和常量等，而执行的逻辑操作。\n「副作用」包含却不仅限于：生成输出，明确使用 require 或 include，连接到外部服务，修改 ini 设置，发出错误或异常，修改全局或静态变量，读取或写入一个文件，等等。\n以下是一个 反例，一份包含「函数声明」以及产生「副作用」的代码：\n\u003c?php // 「副作用」：修改 ini 配置 ini_set('error_reporting', E_ALL); // 「副作用」：引入文件 include \"file.php\"; // 「副作用」：生成输出 echo \"\\n\"; // 声明函数 function foo() { // function body } 下面是一个范例，一份只包含声明不产生「副作用」的代码：\n\u003c?php // 声明函数 function foo() { // 函数主体部分 } // 条件声明 **不** 属于「副作用」 if (! function_exists('bar')) { function bar() { // 函数主体部分 } } 2.编码风格 1.概览 代码 必须 遵循 [PSR-1] 中的编码规范 。 代码 必须 使用 4 个空格符而不是「Tab 键」进行缩进。 每行的字符数 应该 软性保持在 80 个之内，理论上 一定不可 多于 120 个，但 一定不可 有硬性限制。 每个 namespace 命名空间声明语句和 use 声明语句块后面，必须 插入一个空白行。 类的开始花括号（{） 必须 写在函数声明后自成一行，结束花括号（}）也 必须 写在函数主体后自成一行。 方法的开始花括号（{） 必须 写在函数声明后自成一行，结束花括号（}）也 必须 写在函数主体后自成一行。 类的属性和方法 必须 添加访问修饰符（private、protected 以及 public），abstract 以及 final 必须 声明在访问修饰符之前，而 static 必须 声明在访问修饰符之后。 控制结构的关键字后 必须 要有一个空格符，而调用方法或函数时则 一定不可 有。 控制结构的开始花括号（{） 必须 写在声明的同一行，而结束花括号（}） 必须 写在主体后自成一行。 控制结构的开始左括号后和结束右括号前，都 一定不可 有空格符。 控制结构必须使用花括号({}) 1.1.示例 本示例将作为下文规则的快速概览：\n\u003c?php namespace Vendor\\Package; use FooInterface; use BarClass as Bar; use OtherVendor\\OtherPackage\\BazClass; class Foo extends Bar implements FooInterface { public function sampleMethod($a, $b = null) { if ($a === $b) { bar(); } elseif ($a \u003e $b) { $foo-\u003ebar($arg1); } else { BazClass::bar($arg2, $arg3); } } final public static function bar() { // 方法体 } } 2. 通则 2.1. 基本编码准则 代码 必须 符合 PSR-1 中的所有规范。 2.2. 文件 所有 PHP 文件 必须 使用 Unix LF (linefeed) 作为行的结束符。\n所有 PHP 文件 必须 以一个空白行作为结束。\n纯 PHP 代码文件 必须 省略最后的 ?\u003e 结束标签。\n2.3. 行 行的长度 一定不可 有硬性的约束。\n每行 不该 多于 80 个字符，大于 80 字符的行 应该 折成多行。\n非空行后 一定不可 有多余的空格符。\n空行 可以 使得阅读代码更加方便以及有助于代码的分块。\n每行 一定不可 存在多于一条语句。\n2.4. 缩进 代码 必须 使用 4 个空格来进行缩进， 并且 一定不能 使用 tab 键来缩进。 注：仅使用空格，而不是使用空格和 tab 键混在一起， 能帮助避免在查看代码差异，打补丁，查看提交历史，以及进行注解时产生问题。使用空格也使得代码对齐更轻松。\n2.5. 关键字与 True/False/Null PHP 的 关键字 必须 使用小写形式。\nPHP 的常量 true， false， 还有 null 必须 使用小写形式。\n3. 命名空间和使用声明 namespace 声明之后 必须 存在一个空行。\n所有的 use 声明 必须 位于 namespace 声明之后。\n每条 use 声明 必须 只有一个 use 关键字。\nuse 语句块之后 必须 存在一个空行。\n例如：\n\u003c?php namespace Vendor\\Package; use FooClass; use BarClass as Bar; use OtherVendor\\OtherPackage\\BazClass; // ... 其他 PHP 代码 ... 4. 类、属性和方法 此处的「类」泛指所有的「class 类」、「接口」以及「traits 可复用代码块」。\n4.1. 扩展与继承 关键词 extends 和 implements 必须 写在类名称的同一行。 类的开始花括号 必须 独占一行，结束花括号也 必须 在类主体后独占一行。 \u003c?php namespace Vendor\\Package; use FooClass; use BarClass as Bar; use OtherVendor\\OtherPackage\\BazClass; class ClassName extends ParentClass implements \\ArrayAccess, \\Countable { // 这里面是常量、属性、类方法 } implements 的继承列表也 可以 分成多行，这样的话，每个继承接口名称都 必须 分开独立成行，包括第一个。 \u003c?php namespace Vendor\\Package; use FooClass; use BarClass as Bar; use OtherVendor\\OtherPackage\\BazClass; class ClassName extends ParentClass implements \\ArrayAccess, \\Countable, \\Serializable { // 这里面是常量、属性、类方法 } 4.2. 属性 每个属性都 必须 添加访问修饰符。\n一定不可 使用关键字 var 声明一个属性。\n每条语句 一定不可 定义超过一个属性。\n不该 使用下划线作为前缀，来区分属性是 protected 或 private。\n以下是属性声明的一个范例：\n\u003c?php namespace Vendor\\Package; class ClassName { public $foo = null; } 4.3. 方法 所有方法都 必须 添加访问修饰符。\n不该 使用下划线作为前缀，来区分方法是 protected 或 private 访问修饰符。\n方法名称后 一定不可 有空格符，其开始花括号 必须 独占一行，结束花括号也 必须 在方法主体后单独成一行。参数左括号后和右括号前 一定不可 有空格。\n一个标准的方法声明可参照以下范例，留意其括号、逗号、空格以及花括号的位置。\n\u003c?php namespace Vendor\\Package; class ClassName { public function fooBarBaz($arg1, \u0026$arg2, $arg3 = []) { // 方法主体 } } 4.4. 方法的参数 参数列表中，每个逗号后面 必须 要有一个空格，而逗号前面 一定不可 有空格。\nphp7及以上版本参数必须申明类型\nfunction getSoft(int $softId, array $params) {/* todo */} 有默认值的参数，必须 放到参数列表的末尾。\n\u003c?php namespace Vendor\\Package; class ClassName { public function foo($arg1, \u0026$arg2, $arg3 = []) { // 方法主体 } } 参数列表 可以 分列成多行，这样，包括第一个参数在内的每个参数都 必须 单独成行。\n拆分成多行的参数列表后，结束括号以及方法开始花括号 必须 写在同一行，中间用一个空格分隔。\n\u003c?php namespace Vendor\\Package; class ClassName { public function aVeryLongMethodName( ClassTypeHint $arg1, \u0026$arg2, array $arg3 = [] ) { // 方法主体 } } 4.5. abstract, final, 和 static 关键字 需要添加 abstract 或 final 声明时，必须 写在访问修饰符前，而 static 则 必须 写在其后。 \u003c?php namespace Vendor\\Package; abstract class ClassName { protected static $foo; abstract protected function zim(); final public static function bar() { // 方法主体 } } 4.6. 方法及函数调用 方法及函数调用时，方法名或函数名与参数左括号之间 一定不可 有空格，参数右括号前也 一定不可 有空格。每个逗号前 一定不可 有空格，但其后 必须 有一个空格。 \u003c?php bar(); $foo-\u003ebar($arg1); Foo::bar($arg2, $arg3); 参数 可以 分列成多行，此时包括第一个参数在内的每个参数都 必须 单独成行。 \u003c?php $foo-\u003ebar( $longArgument, $longerArgument, $muchLongerArgument ); 4.7局部变量和成员变量 所有申明的变量 必须 被使用\n所有被使用的变量 必须 确保已申明\n所有变量 必须 初始化\n5. 控制结构 控制结构的基本规范如下：\n控制结构关键词后 必须 有一个空格。 控制结构关键词必须使用boolean类型 左括号 ( 后 一定不可 有空格。 右括号 ) 前也 一定不可 有空格。 右括号 ) 与开始花括号 { 间 必须 有一个空格。 结构体主体 必须 要有一次缩进。 结束花括号 } 必须 在结构体主体后单独成行。 每个结构体的主体都 必须 被包含在成对的花括号之中， 这能让结构体更加标准化，以及减少加入新行时，出错的可能性。\n5.1. if, elseif, else 标准的 if 结构如下代码所示，请留意「括号」、「空格」以及「花括号」的位置， 注意 else 和 elseif 都与前面的结束花括号在同一行。 \u003c?php if ($expr1) { // if body } elseif ($expr2) { // elseif body } else { // else body; } 应该 使用关键词 elseif 代替所有 else if ，以使得所有的控制关键字都像是单独的一个词。 5.2. switch, case 标准的 switch 结构如下代码所示，留意括号、空格以及花括号的位置。\ncase 语句 必须 相对 switch 进行一次缩进，而 break 语句以及 case 内的其它语句都 必须 相对 case 进行一次缩进。\n如果存在非空的 case 直穿语句，主体里 必须 有类似 // no break 的注释。\n\u003c?php switch ($expr) { case 0: echo 'First case, with a break'; break; case 1: echo 'Second case, which falls through'; // no break case 2: case 3: case 4: echo 'Third case, return instead of break'; return; default: echo 'Default case'; break; } 5.3. while, do while 一个规范的 while 语句应该如下所示，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php while ($expr) { // 结构体 } 标准的 do while 语句如下所示，同样的，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php do { // 结构体 } while ($expr); 5.4. for 标准的 for 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php for ($i = 0; $i \u003c 10; $i++) { // for 循环主体 } 5.5. foreach 标准的 foreach 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php foreach ($iterable as $key =\u003e $value) { // foreach 主体 } 5.6. try, catch 标准的 try catch 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php try { // try 主体 } catch (FirstExceptionType $e) { // catch 主体 } catch (OtherExceptionType $e) { // catch 主体 } 6. 闭包 闭包声明时，关键词 function 后以及关键词 use 的前后都 必须 要有一个空格。\n开始花括号 必须 写在声明的同一行，结束花括号 必须 紧跟主体结束的下一行。\n参数列表和变量列表的左括号后以及右括号前，一定不可 有空格。\n参数和变量列表中，逗号前 一定不可 有空格，而逗号后 必须 要有空格。\n闭包中有默认值的参数 必须 放到列表的后面。\n标准的闭包声明语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。\n\u003c?php $closureWithArgs = function ($arg1, $arg2) { // 主体 }; $closureWithArgsAndVars = function ($arg1, $arg2) use ($var1, $var2) { // 主体 }; 参数列表以及变量列表 可以 分成多行，这样，包括第一个在内的每个参数或变量都 必须 单独成行，而列表的右括号与闭包的开始花括号 必须 放在同一行。 以下几个例子，包含了参数和变量列表被分成多行的多情况。\n\u003c?php $longArgs_noVars = function ( $longArgument, $longerArgument, $muchLongerArgument ) { // 主体 }; $noArgs_longVars = function () use ( $longVar1, $longerVar2, $muchLongerVar3 ) { // 主体 }; $longArgs_longVars = function ( $longArgument, $longerArgument, $muchLongerArgument ) use ( $longVar1, $longerVar2, $muchLongerVar3 ) { // 主体 }; $longArgs_shortVars = function ( $longArgument, $longerArgument, $muchLongerArgument ) use ($var1) { // 主体 }; $shortArgs_longVars = function ($arg) use ( $longVar1, $longerVar2, $muchLongerVar3 ) { // 主体 }; 注意，闭包被直接用作函数或方法调用的参数时，以上规则仍然适用。\n\u003c?php $foo-\u003ebar( $arg1, function ($arg2) use ($var1) { // 主体 }, $arg3 ); ","wordCount":"1191","inLanguage":"zh","datePublished":"2021-07-02T16:51:10+08:00","dateModified":"2021-07-02T16:51:10+08:00","author":{"@type":"Person","name":"wrpota"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.potawang.cn/post/php_specification/"},"publisher":{"@type":"Organization","name":"Pota Blog","logo":{"@type":"ImageObject","url":"https://www.potawang.cn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://www.potawang.cn/ accesskey=h title="Wrpota (Alt + H)">Wrpota</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.potawang.cn/categories title=Categories><span>Categories</span></a></li><li><a href=https://www.potawang.cn/tags title=Tags><span>Tags</span></a></li><li><a href=https://www.potawang.cn/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://www.potawang.cn/archives title=Archives><span>Archives</span></a></li><li><a href=https://www.potawang.cn/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.potawang.cn/>主页</a>&nbsp;»&nbsp;<a href=https://www.potawang.cn/post/>Posts</a></div><h1 class=post-title>PHP代码规范-初版</h1><div class=post-description>HP代码规范-初版</div><div class=post-meta>July 2, 2021&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;wrpota</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>目录</div></summary><div class=inner><ul><li><a href=#1%e7%bc%96%e7%a0%81%e8%a7%84%e8%8c%83 aria-label=1.编码规范>1.编码规范</a><ul><li><a href=#1%e7%b1%bb%e7%9a%84%e5%b8%b8%e9%87%8f%e5%b1%9e%e6%80%a7%e5%92%8c%e6%96%b9%e6%b3%95 aria-label=1.类的常量、属性和方法>1.类的常量、属性和方法</a><ul><li><a href=#11%e5%b8%b8%e9%87%8f aria-label=1.1常量>1.1常量</a></li><li><a href=#12%e5%b1%9e%e6%80%a7 aria-label=1.2.属性>1.2.属性</a></li><li><a href=#13%e6%96%b9%e6%b3%95 aria-label=1.3.方法>1.3.方法</a></li><li><a href=#14%e6%b3%a8%e9%87%8a aria-label=1.4.注释>1.4.注释</a></li></ul></li><li><a href=#2%e6%96%87%e4%bb%b6 aria-label=2.文件>2.文件</a><ul><li><a href=#21-php-%e6%a0%87%e7%ad%be aria-label="2.1. PHP 标签">2.1. PHP 标签</a></li><li><a href=#22-%e5%ad%97%e7%ac%a6%e9%9b%86%e7%bc%96%e7%a0%81 aria-label="2.2. 字符集编码">2.2. 字符集编码</a></li><li><a href=#23-%e5%89%af%e4%bd%9c%e7%94%a8 aria-label="2.3. 副作用">2.3. 副作用</a></li></ul></li></ul></li><li><a href=#2%e7%bc%96%e7%a0%81%e9%a3%8e%e6%a0%bc aria-label=2.编码风格>2.编码风格</a><ul><li><a href=#1%e6%a6%82%e8%a7%88 aria-label=1.概览>1.概览</a><ul><li><a href=#11%e7%a4%ba%e4%be%8b aria-label=1.1.示例>1.1.示例</a></li></ul></li><li><a href=#2-%e9%80%9a%e5%88%99 aria-label="2. 通则">2. 通则</a><ul><li><a href=#21-%e5%9f%ba%e6%9c%ac%e7%bc%96%e7%a0%81%e5%87%86%e5%88%99 aria-label="2.1. 基本编码准则">2.1. 基本编码准则</a></li><li><a href=#22-%e6%96%87%e4%bb%b6 aria-label="2.2. 文件">2.2. 文件</a></li><li><a href=#23-%e8%a1%8c aria-label="2.3. 行">2.3. 行</a></li><li><a href=#24-%e7%bc%a9%e8%bf%9b aria-label="2.4. 缩进">2.4. 缩进</a></li><li><a href=#25-%e5%85%b3%e9%94%ae%e5%ad%97%e4%b8%8e-truefalsenull aria-label="2.5. 关键字与 True/False/Null">2.5. 关键字与 True/False/Null</a></li></ul></li><li><a href=#3-%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e5%92%8c%e4%bd%bf%e7%94%a8%e5%a3%b0%e6%98%8e aria-label="3. 命名空间和使用声明">3. 命名空间和使用声明</a></li><li><a href=#4-%e7%b1%bb%e5%b1%9e%e6%80%a7%e5%92%8c%e6%96%b9%e6%b3%95 aria-label="4. 类、属性和方法">4. 类、属性和方法</a><ul><li><a href=#41-%e6%89%a9%e5%b1%95%e4%b8%8e%e7%bb%a7%e6%89%bf aria-label="4.1. 扩展与继承">4.1. 扩展与继承</a></li><li><a href=#42-%e5%b1%9e%e6%80%a7 aria-label="4.2. 属性">4.2. 属性</a></li><li><a href=#43-%e6%96%b9%e6%b3%95 aria-label="4.3. 方法">4.3. 方法</a></li><li><a href=#44-%e6%96%b9%e6%b3%95%e7%9a%84%e5%8f%82%e6%95%b0 aria-label="4.4. 方法的参数">4.4. 方法的参数</a></li><li><a href=#45-abstract-final-%e5%92%8c-static-%e5%85%b3%e9%94%ae%e5%ad%97 aria-label="4.5. abstract, final, 和 static 关键字">4.5. <code>abstract</code>, <code>final</code>, 和 <code>static</code> 关键字</a></li><li><a href=#46-%e6%96%b9%e6%b3%95%e5%8f%8a%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8 aria-label="4.6. 方法及函数调用">4.6. 方法及函数调用</a></li><li><a href=#47%e5%b1%80%e9%83%a8%e5%8f%98%e9%87%8f%e5%92%8c%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f aria-label=4.7局部变量和成员变量>4.7局部变量和成员变量</a></li></ul></li><li><a href=#5-%e6%8e%a7%e5%88%b6%e7%bb%93%e6%9e%84 aria-label="5. 控制结构">5. 控制结构</a><ul><li><a href=#51-if-elseif-else aria-label="5.1. if, elseif, else">5.1. <code>if</code>, <code>elseif</code>, <code>else</code></a></li><li><a href=#52-switch-case aria-label="5.2. switch, case">5.2. <code>switch</code>, <code>case</code></a></li><li><a href=#53-while-do-while aria-label="5.3. while, do while">5.3. <code>while</code>, <code>do while</code></a></li><li><a href=#54-for aria-label="5.4. for">5.4. <code>for</code></a></li><li><a href=#55-foreach aria-label="5.5. foreach">5.5. <code>foreach</code></a></li><li><a href=#56-try-catch aria-label="5.6. try, catch">5.6. <code>try</code>, <code>catch</code></a></li></ul></li><li><a href=#6-%e9%97%ad%e5%8c%85 aria-label="6. 闭包">6. 闭包</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=1编码规范>1.编码规范<a hidden class=anchor aria-hidden=true href=#1编码规范>#</a></h1><ul><li>PHP 代码文件 <strong>必须</strong> 以 <code>&lt;?php</code> 或 <code>&lt;?=</code> 标签开始；</li><li>PHP 代码文件 <strong>必须</strong> 以 <code>不带 BOM 的 UTF-8</code> 编码；</li><li>PHP 代码中 <strong>应该</strong> 只定义类、函数、常量等声明， 或其他会产生 <code>副作用</code> 的操作（如：生成文件输出以及修改 .ini 配置文件等），二者只能选其一；</li><li>命名空间以及类 <strong>必须</strong> 符合 PSR 的自动加载规范： [<a href=https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md>PSR-0</a>（已废弃）或 <a href=https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md>PSR-4</a>] 中的一个。</li><li>类的命名 <strong>必须</strong> 遵循 <code>StudlyCaps</code> 大写开头的驼峰命名规范；</li><li>类中的常量所有字母都 <strong>必须</strong> 大写，单词间用下划线分隔；</li><li>方法名称 <strong>必须</strong> 符合 <code>camelCase</code> 式的小写开头驼峰命名规范。</li><li>单一文件只能申明单个类</li></ul><h2 id=1类的常量属性和方法>1.类的常量、属性和方法<a hidden class=anchor aria-hidden=true href=#1类的常量属性和方法>#</a></h2><p>此处的「类」指代所有的类、接口以及可复用代码块（traits）。</p><h3 id=11常量>1.1常量<a hidden class=anchor aria-hidden=true href=#11常量>#</a></h3><p>类的常量中所有字母都 <strong>必须</strong> 大写，词间以下划线分隔。例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Model</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Foo</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>VERSION</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;1.0&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>DATE_APPROVED</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;2012-06-01&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=12属性>1.2.属性<a hidden class=anchor aria-hidden=true href=#12属性>#</a></h3><ul><li>类的属性命名 <strong>可以</strong> 遵循：<ul><li>大写开头的驼峰式 (<code>$StudlyCaps</code>)</li><li>小写开头的驼峰式 (<code>$camelCase</code>)</li><li>下划线分隔式 (<code>$under_score</code>)</li></ul></li><li>本规范不做强制要求，但无论遵循哪种命名方式，都 <strong>应该</strong> 在一定的范围内保持一致。这个范围可以是整个团队、整个包、整个类或整个方法。</li></ul><h3 id=13方法>1.3.方法<a hidden class=anchor aria-hidden=true href=#13方法>#</a></h3><ul><li>方法名称 <strong>必须</strong> 符合 <code>camelCase()</code> 式的小写开头驼峰命名规范。</li></ul><h3 id=14注释>1.4.注释<a hidden class=anchor aria-hidden=true href=#14注释>#</a></h3><ul><li><p>所有的类都 <strong>必须</strong> 添加大概说明、创建者、创建日期 切放在<code>namespace</code>申明前 并空一行。例:</p><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * 类说明
</span></span></span><span style=display:flex><span><span style=color:#e6db74> *
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * User: pota
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * DateTime: 2018/11/15 5:37 PM
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Example</span>;
</span></span></code></pre></div></blockquote></li><li><p>方法注释 <strong>必须</strong> 采用<code>doc</code>风格注释。例:</p><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * 方法说明
</span></span></span><span style=display:flex><span><span style=color:#e6db74> *
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @param int $param 参数说明
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @throw \Exception 若有异常抛出 需申明抛出异常类型
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @return bool true 成功 false 失败  //强制必须申明所返回参数类型 若有必要需说明返回参数说明(非强制)
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>action</span>(<span style=color:#a6e22e>int</span> $param)<span style=color:#f92672>:</span> <span style=color:#a6e22e>bool</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>//类主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div></blockquote></li><li><p>类属性和参数需说明参数类型以及参数说明。例:</p><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * 参数说明
</span></span></span><span style=display:flex><span><span style=color:#e6db74> *
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @var array
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> $param <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>();
</span></span></code></pre></div></blockquote></li><li><p>方法内部单行注释，在被注释语句上方另起一行，使用<code>//&lt;...></code>注释。方法内部多行注释 使用<code>/* &lt;...> */</code>注释，注意与代码对齐。</p></li><li><p>代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻 辑等的修改。</p></li><li><p>注释类型申明可以使用以下类型</p><ol><li><code>bool</code>：此类型适用的元素仅具有状态<code>TRUE</code>或<code>FALSE</code>。</li><li><code>int</code>：此类型适用的元素是整数或整数。</li><li><code>float</code>：此类型适用的元素是连续或实数。</li><li><code>string</code>：此类型适用的元素是二进制字符串。</li><li><code>object</code>：此类型适用的元素是未确定类的实例。</li><li><code>array</code>：此类型适用的元素是值数组。</li><li><code>iterable</code>：此类型适用的元素是每个<a href=https://php.net/manual/language.types.iterable.php>PHP定义的</a>数组或Traversable对象。</li><li><code>resource</code>：此类型适用的元素是每个<a href=https://php.net/manual/language.types.resource.php>PHP定义的</a>资源。</li><li><code>mixed</code>：此类型适用的元素可以是此处指定的任何类型。在编译时不知道将使用哪种类型。</li><li><code>void</code>：此类型通常仅在定义方法或函数的返回类型时使用，指示“未返回任何内容”，因此用户不应依赖任何返回的值。</li></ol></li></ul><h2 id=2文件>2.文件<a hidden class=anchor aria-hidden=true href=#2文件>#</a></h2><h3 id=21-php-标签>2.1. PHP 标签<a hidden class=anchor aria-hidden=true href=#21-php-标签>#</a></h3><ul><li>PHP 代码 <strong>必须</strong> 使用 <code>&lt;?php ?></code> 长标签 或 <code>&lt;?= ?></code> 短输出标签；<strong>一定不可</strong> 使用其它自定义标签。</li></ul><h3 id=22-字符集编码>2.2. 字符集编码<a hidden class=anchor aria-hidden=true href=#22-字符集编码>#</a></h3><ul><li>PHP 代码 <strong>必须</strong> 且只可使用 <code>不带 BOM 的 UTF-8</code> 编码。</li></ul><h3 id=23-副作用>2.3. 副作用<a hidden class=anchor aria-hidden=true href=#23-副作用>#</a></h3><ul><li><p>一份 PHP 文件中 <strong>应该</strong> 要不就只定义新的声明，如类、函数或常量等不产生 <code>副作用</code> 的操作，要不就只书写会产生 <code>副作用</code> 的逻辑操作，但 <strong>不该</strong> 同时具有两者。</p><p>「副作用」(side effects) 一词的意思是，仅仅通过包含文件，不直接声明类、函数和常量等，而执行的逻辑操作。</p><p>「副作用」包含却不仅限于：生成输出，明确使用 require 或 include，连接到外部服务，修改 ini 设置，发出错误或异常，修改全局或静态变量，读取或写入一个文件，等等。</p><p>以下是一个 <code>反例</code>，一份包含「函数声明」以及产生「副作用」的代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 「副作用」：修改 ini 配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>ini_set</span>(<span style=color:#e6db74>&#39;error_reporting&#39;</span>, <span style=color:#66d9ef>E_ALL</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 「副作用」：引入文件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>include</span> <span style=color:#e6db74>&#34;file.php&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 「副作用」：生成输出
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;html&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 声明函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foo</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// function body
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>下面是一个范例，一份只包含声明不产生「副作用」的代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 声明函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foo</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 函数主体部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 条件声明 **不** 属于「副作用」
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span> <span style=color:#a6e22e>function_exists</span>(<span style=color:#e6db74>&#39;bar&#39;</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bar</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 函数主体部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul><h1 id=2编码风格>2.编码风格<a hidden class=anchor aria-hidden=true href=#2编码风格>#</a></h1><h2 id=1概览>1.概览<a hidden class=anchor aria-hidden=true href=#1概览>#</a></h2><ul><li>代码 <strong>必须</strong> 遵循 [<a href=https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md>PSR-1</a>] 中的编码规范 。</li><li>代码 <strong>必须</strong> 使用 4 个空格符而不是「Tab 键」进行缩进。</li><li>每行的字符数 <strong>应该</strong> 软性保持在 80 个之内，理论上 <strong>一定不可</strong> 多于 120 个，但 <strong>一定不可</strong> 有硬性限制。</li><li>每个 <code>namespace</code> 命名空间声明语句和 <code>use</code> 声明语句块后面，<strong>必须</strong> 插入一个空白行。</li><li>类的开始花括号（<code>{</code>） <strong>必须</strong> 写在函数声明后自成一行，结束花括号（<code>}</code>）也 <strong>必须</strong> 写在函数主体后自成一行。</li><li>方法的开始花括号（<code>{</code>） <strong>必须</strong> 写在函数声明后自成一行，结束花括号（<code>}</code>）也 <strong>必须</strong> 写在函数主体后自成一行。</li><li>类的属性和方法 <strong>必须</strong> 添加访问修饰符（<code>private</code>、<code>protected</code> 以及 <code>public</code>），<code>abstract</code> 以及 <code>final</code> <strong>必须</strong> 声明在访问修饰符之前，而 <code>static</code> <strong>必须</strong> 声明在访问修饰符之后。</li><li>控制结构的关键字后 <strong>必须</strong> 要有一个空格符，而调用方法或函数时则 <strong>一定不可</strong> 有。</li><li>控制结构的开始花括号（<code>{</code>） <strong>必须</strong> 写在声明的同一行，而结束花括号（<code>}</code>） <strong>必须</strong> 写在主体后自成一行。</li><li>控制结构的开始左括号后和结束右括号前，都 <strong>一定不可</strong> 有空格符。</li><li>控制结构必须使用花括号(<code>{}</code>)</li></ul><h3 id=11示例>1.1.示例<a hidden class=anchor aria-hidden=true href=#11示例>#</a></h3><p>本示例将作为下文规则的快速概览：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>FooInterface</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>BarClass</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bar</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>OtherVendor\OtherPackage\BazClass</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Foo</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Bar</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>FooInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sampleMethod</span>($a, $b <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> ($a <span style=color:#f92672>===</span> $b) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>bar</span>();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>elseif</span> ($a <span style=color:#f92672>&gt;</span> $b) {
</span></span><span style=display:flex><span>            $foo<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bar</span>($arg1);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>BazClass</span><span style=color:#f92672>::</span><span style=color:#a6e22e>bar</span>($arg2, $arg3);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bar</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=2-通则>2. 通则<a hidden class=anchor aria-hidden=true href=#2-通则>#</a></h2><h3 id=21-基本编码准则>2.1. 基本编码准则<a hidden class=anchor aria-hidden=true href=#21-基本编码准则>#</a></h3><ul><li>代码 <strong>必须</strong> 符合 <a href=https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md>PSR-1</a> 中的所有规范。</li></ul><h3 id=22-文件>2.2. 文件<a hidden class=anchor aria-hidden=true href=#22-文件>#</a></h3><ul><li><p>所有 PHP 文件 <strong>必须</strong> 使用 <code>Unix LF (linefeed)</code> 作为行的结束符。</p></li><li><p>所有 PHP 文件 <strong>必须</strong> 以一个空白行作为结束。</p></li><li><p>纯 PHP 代码文件 <strong>必须</strong> 省略最后的 <code>?></code> 结束标签。</p></li></ul><h3 id=23-行>2.3. 行<a hidden class=anchor aria-hidden=true href=#23-行>#</a></h3><ul><li><p>行的长度 <strong>一定不可</strong> 有硬性的约束。</p></li><li><p>每行 <strong>不该</strong> 多于 80 个字符，大于 80 字符的行 <strong>应该</strong> 折成多行。</p></li><li><p>非空行后 <strong>一定不可</strong> 有多余的空格符。</p></li><li><p>空行 <strong>可以</strong> 使得阅读代码更加方便以及有助于代码的分块。</p></li><li><p>每行 <strong>一定不可</strong> 存在多于一条语句。</p></li></ul><h3 id=24-缩进>2.4. 缩进<a hidden class=anchor aria-hidden=true href=#24-缩进>#</a></h3><ul><li>代码 <strong>必须</strong> 使用 4 个空格来进行缩进， 并且 <strong>一定不能</strong> 使用 <code>tab</code> 键来缩进。</li></ul><blockquote><p>注：仅使用空格，而不是使用空格和 <code>tab</code> 键混在一起， 能帮助避免在查看代码差异，打补丁，查看提交历史，以及进行注解时产生问题。使用空格也使得代码对齐更轻松。</p></blockquote><h3 id=25-关键字与-truefalsenull>2.5. 关键字与 True/False/Null<a hidden class=anchor aria-hidden=true href=#25-关键字与-truefalsenull>#</a></h3><ul><li><p>PHP 的 <a href=http://php.net/manual/en/reserved.keywords.php>关键字</a> <strong>必须</strong> 使用小写形式。</p></li><li><p>PHP 的常量 <code>true</code>， <code>false</code>， 还有 <code>null</code> <strong>必须</strong> 使用小写形式。</p></li></ul><h2 id=3-命名空间和使用声明>3. 命名空间和使用声明<a hidden class=anchor aria-hidden=true href=#3-命名空间和使用声明>#</a></h2><ul><li><p><code>namespace</code> 声明之后 <strong>必须</strong> 存在一个空行。</p></li><li><p>所有的 <code>use</code> 声明 <strong>必须</strong> 位于 <code>namespace</code> 声明之后。</p></li><li><p>每条 <code>use</code> 声明 <strong>必须</strong> 只有一个 <code>use</code> 关键字。</p></li><li><p><code>use</code> 语句块之后 <strong>必须</strong> 存在一个空行。</p></li><li><p>例如：</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>FooClass</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>BarClass</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bar</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>OtherVendor\OtherPackage\BazClass</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ... 其他 PHP 代码 ...
</span></span></span></code></pre></div><h2 id=4-类属性和方法>4. 类、属性和方法<a hidden class=anchor aria-hidden=true href=#4-类属性和方法>#</a></h2><p>此处的「类」泛指所有的「class 类」、「接口」以及「traits 可复用代码块」。</p><h3 id=41-扩展与继承>4.1. 扩展与继承<a hidden class=anchor aria-hidden=true href=#41-扩展与继承>#</a></h3><ul><li>关键词 <code>extends</code> 和 <code>implements</code> <strong>必须</strong> 写在类名称的同一行。</li><li>类的开始花括号 <strong>必须</strong> 独占一行，结束花括号也 <strong>必须</strong> 在类主体后独占一行。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>FooClass</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>BarClass</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bar</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>OtherVendor\OtherPackage\BazClass</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ParentClass</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>\ArrayAccess</span>, <span style=color:#a6e22e>\Countable</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 这里面是常量、属性、类方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><ul><li><code>implements</code> 的继承列表也 <strong>可以</strong> 分成多行，这样的话，每个继承接口名称都 <strong>必须</strong> 分开独立成行，包括第一个。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>FooClass</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>BarClass</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bar</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>OtherVendor\OtherPackage\BazClass</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ParentClass</span> <span style=color:#66d9ef>implements</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>\ArrayAccess</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>\Countable</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>\Serializable</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 这里面是常量、属性、类方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=42-属性>4.2. 属性<a hidden class=anchor aria-hidden=true href=#42-属性>#</a></h3><ul><li><p>每个属性都 <strong>必须</strong> 添加访问修饰符。</p></li><li><p><strong>一定不可</strong> 使用关键字 <code>var</code> 声明一个属性。</p></li><li><p>每条语句 <strong>一定不可</strong> 定义超过一个属性。</p></li><li><p><strong>不该</strong> 使用下划线作为前缀，来区分属性是 protected 或 private。</p></li></ul><p>以下是属性声明的一个范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> $foo <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=43-方法>4.3. 方法<a hidden class=anchor aria-hidden=true href=#43-方法>#</a></h3><ul><li><p>所有方法都 <strong>必须</strong> 添加访问修饰符。</p></li><li><p><strong>不该</strong> 使用下划线作为前缀，来区分方法是 protected 或 private 访问修饰符。</p></li><li><p>方法名称后 <strong>一定不可</strong> 有空格符，其开始花括号 <strong>必须</strong> 独占一行，结束花括号也 <strong>必须</strong> 在方法主体后单独成一行。参数左括号后和右括号前 <strong>一定不可</strong> 有空格。</p></li></ul><p>一个标准的方法声明可参照以下范例，留意其括号、逗号、空格以及花括号的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>fooBarBaz</span>($arg1, <span style=color:#f92672>&amp;</span>$arg2, $arg3 <span style=color:#f92672>=</span> [])
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=44-方法的参数>4.4. 方法的参数<a hidden class=anchor aria-hidden=true href=#44-方法的参数>#</a></h3><ul><li><p>参数列表中，每个逗号后面 <strong>必须</strong> 要有一个空格，而逗号前面 <strong>一定不可</strong> 有空格。</p></li><li><p><code>php7</code>及以上版本参数必须申明类型</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getSoft</span>(<span style=color:#a6e22e>int</span> $softId, <span style=color:#66d9ef>array</span> $params) {<span style=color:#75715e>/* todo */</span>}
</span></span></code></pre></div></li><li><p>有默认值的参数，<strong>必须</strong> 放到参数列表的末尾。</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foo</span>($arg1, <span style=color:#f92672>&amp;</span>$arg2, $arg3 <span style=color:#f92672>=</span> [])
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><p>参数列表 <strong>可以</strong> 分列成多行，这样，包括第一个参数在内的每个参数都 <strong>必须</strong> 单独成行。</p></li><li><p>拆分成多行的参数列表后，结束括号以及方法开始花括号 <strong>必须</strong> 写在同一行，中间用一个空格分隔。</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>aVeryLongMethodName</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ClassTypeHint</span> $arg1,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&amp;</span>$arg2,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>array</span> $arg3 <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    ) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=45-abstract-final-和-static-关键字>4.5. <code>abstract</code>, <code>final</code>, 和 <code>static</code> 关键字<a hidden class=anchor aria-hidden=true href=#45-abstract-final-和-static-关键字>#</a></h3><ul><li>需要添加 <code>abstract</code> 或 <code>final</code> 声明时，<strong>必须</strong> 写在访问修饰符前，而 <code>static</code> 则 <strong>必须</strong> 写在其后。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Vendor\Package</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>static</span> $foo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>zim</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bar</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=46-方法及函数调用>4.6. 方法及函数调用<a hidden class=anchor aria-hidden=true href=#46-方法及函数调用>#</a></h3><ul><li>方法及函数调用时，方法名或函数名与参数左括号之间 <strong>一定不可</strong> 有空格，参数右括号前也 <strong>一定不可</strong> 有空格。每个逗号前 <strong>一定不可</strong> 有空格，但其后 <strong>必须</strong> 有一个空格。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>bar</span>();
</span></span><span style=display:flex><span>$foo<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bar</span>($arg1);
</span></span><span style=display:flex><span><span style=color:#a6e22e>Foo</span><span style=color:#f92672>::</span><span style=color:#a6e22e>bar</span>($arg2, $arg3);
</span></span></code></pre></div><ul><li>参数 <strong>可以</strong> 分列成多行，此时包括第一个参数在内的每个参数都 <strong>必须</strong> 单独成行。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$foo<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bar</span>(
</span></span><span style=display:flex><span>    $longArgument,
</span></span><span style=display:flex><span>    $longerArgument,
</span></span><span style=display:flex><span>    $muchLongerArgument
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=47局部变量和成员变量>4.7局部变量和成员变量<a hidden class=anchor aria-hidden=true href=#47局部变量和成员变量>#</a></h3><ul><li><p>所有申明的变量 <strong>必须</strong> 被使用</p></li><li><p>所有被使用的变量 <strong>必须</strong> 确保已申明</p></li><li><p>所有变量 <strong>必须</strong> 初始化</p></li></ul><h2 id=5-控制结构>5. 控制结构<a hidden class=anchor aria-hidden=true href=#5-控制结构>#</a></h2><p>控制结构的基本规范如下：</p><ul><li>控制结构关键词后 <strong>必须</strong> 有一个空格。</li><li>控制结构关键词<strong>必须</strong>使用<code>boolean</code>类型</li><li>左括号 <code>(</code> 后 <strong>一定不可</strong> 有空格。</li><li>右括号 <code>)</code> 前也 <strong>一定不可</strong> 有空格。</li><li>右括号 <code>)</code> 与开始花括号 <code>{</code> 间 <strong>必须</strong> 有一个空格。</li><li>结构体主体 <strong>必须</strong> 要有一次缩进。</li><li>结束花括号 <code>}</code> <strong>必须</strong> 在结构体主体后单独成行。</li></ul><p>每个结构体的主体都 <strong>必须</strong> 被包含在成对的花括号之中，
这能让结构体更加标准化，以及减少加入新行时，出错的可能性。</p><h3 id=51-if-elseif-else>5.1. <code>if</code>, <code>elseif</code>, <code>else</code><a hidden class=anchor aria-hidden=true href=#51-if-elseif-else>#</a></h3><ul><li>标准的 <code>if</code> 结构如下代码所示，请留意「括号」、「空格」以及「花括号」的位置，
注意 <code>else</code> 和 <code>elseif</code> 都与前面的结束花括号在同一行。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ($expr1) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// if body
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>elseif</span> ($expr2) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// elseif body
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// else body;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><ul><li><strong>应该</strong> 使用关键词 <code>elseif</code> 代替所有 <code>else if</code> ，以使得所有的控制关键字都像是单独的一个词。</li></ul><h3 id=52-switch-case>5.2. <code>switch</code>, <code>case</code><a hidden class=anchor aria-hidden=true href=#52-switch-case>#</a></h3><p>标准的 <code>switch</code> 结构如下代码所示，留意括号、空格以及花括号的位置。</p><p><code>case</code> 语句 <strong>必须</strong> 相对 <code>switch</code> 进行一次缩进，而 <code>break</code> 语句以及 <code>case</code> 内的其它语句都 <strong>必须</strong> 相对 <code>case</code> 进行一次缩进。</p><p>如果存在非空的 <code>case</code> 直穿语句，主体里 <strong>必须</strong> 有类似 <code>// no break</code> 的注释。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> ($expr) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;First case, with a break&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Second case, which falls through&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#75715e>// no break
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Third case, return instead of break&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Default case&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=53-while-do-while>5.3. <code>while</code>, <code>do while</code><a hidden class=anchor aria-hidden=true href=#53-while-do-while>#</a></h3><p>一个规范的 <code>while</code> 语句应该如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> ($expr) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 结构体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>标准的 <code>do while</code> 语句如下所示，同样的，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 结构体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>while</span> ($expr);
</span></span></code></pre></div><h3 id=54-for>5.4. <code>for</code><a hidden class=anchor aria-hidden=true href=#54-for>#</a></h3><p>标准的 <code>for</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ($i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; $i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>; $i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// for 循环主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=55-foreach>5.5. <code>foreach</code><a hidden class=anchor aria-hidden=true href=#55-foreach>#</a></h3><p>标准的 <code>foreach</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreach</span> ($iterable <span style=color:#66d9ef>as</span> $key <span style=color:#f92672>=&gt;</span> $value) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// foreach 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=56-try-catch>5.6. <code>try</code>, <code>catch</code><a hidden class=anchor aria-hidden=true href=#56-try-catch>#</a></h3><p>标准的 <code>try catch</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// try 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>FirstExceptionType</span> $e) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// catch 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>OtherExceptionType</span> $e) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// catch 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=6-闭包>6. 闭包<a hidden class=anchor aria-hidden=true href=#6-闭包>#</a></h2><ul><li><p>闭包声明时，关键词 <code>function</code> 后以及关键词 <code>use</code> 的前后都 <strong>必须</strong> 要有一个空格。</p></li><li><p>开始花括号 <strong>必须</strong> 写在声明的同一行，结束花括号 <strong>必须</strong> 紧跟主体结束的下一行。</p></li><li><p>参数列表和变量列表的左括号后以及右括号前，<strong>一定不可</strong> 有空格。</p></li><li><p>参数和变量列表中，逗号前 <strong>一定不可</strong> 有空格，而逗号后 <strong>必须</strong> 要有空格。</p></li><li><p>闭包中有默认值的参数 <strong>必须</strong> 放到列表的后面。</p></li></ul><p>标准的闭包声明语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$closureWithArgs <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($arg1, $arg2) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$closureWithArgsAndVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($arg1, $arg2) <span style=color:#66d9ef>use</span> ($var1, $var2) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><ul><li>参数列表以及变量列表 <strong>可以</strong> 分成多行，这样，包括第一个在内的每个参数或变量都 <strong>必须</strong> 单独成行，而列表的右括号与闭包的开始花括号 <strong>必须</strong> 放在同一行。</li></ul><p>以下几个例子，包含了参数和变量列表被分成多行的多情况。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$longArgs_noVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (
</span></span><span style=display:flex><span>    $longArgument,
</span></span><span style=display:flex><span>    $longerArgument,
</span></span><span style=display:flex><span>    $muchLongerArgument
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$noArgs_longVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () <span style=color:#66d9ef>use</span> (
</span></span><span style=display:flex><span>    $longVar1,
</span></span><span style=display:flex><span>    $longerVar2,
</span></span><span style=display:flex><span>    $muchLongerVar3
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$longArgs_longVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (
</span></span><span style=display:flex><span>    $longArgument,
</span></span><span style=display:flex><span>    $longerArgument,
</span></span><span style=display:flex><span>    $muchLongerArgument
</span></span><span style=display:flex><span>) <span style=color:#66d9ef>use</span> (
</span></span><span style=display:flex><span>    $longVar1,
</span></span><span style=display:flex><span>    $longerVar2,
</span></span><span style=display:flex><span>    $muchLongerVar3
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$longArgs_shortVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (
</span></span><span style=display:flex><span>    $longArgument,
</span></span><span style=display:flex><span>    $longerArgument,
</span></span><span style=display:flex><span>    $muchLongerArgument
</span></span><span style=display:flex><span>) <span style=color:#66d9ef>use</span> ($var1) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$shortArgs_longVars <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($arg) <span style=color:#66d9ef>use</span> (
</span></span><span style=display:flex><span>    $longVar1,
</span></span><span style=display:flex><span>    $longerVar2,
</span></span><span style=display:flex><span>    $muchLongerVar3
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p>注意，闭包被直接用作函数或方法调用的参数时，以上规则仍然适用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$foo<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bar</span>(
</span></span><span style=display:flex><span>    $arg1,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> ($arg2) <span style=color:#66d9ef>use</span> ($var1) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 主体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    },
</span></span><span style=display:flex><span>    $arg3
</span></span><span style=display:flex><span>);
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.potawang.cn/tags/php/>PHP</a></li></ul><nav class=paginav><a class=prev href=https://www.potawang.cn/post/git/><span class=title>« 上一页</span><br><span>Git教程-初版</span></a></nav></footer><div id=utter-container></div><script src=https://utteranc.es/client.js repo=wrpota/wrpota.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.potawang.cn/>Pota Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
<span><a href=https://beian.miit.gov.cn/#/Integrated/index target=_blank>苏ICP备18012635号</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="复制";function s(){t.innerText="已复制！",setTimeout(()=>{t.innerText="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>