<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Git教程-初版 | Pota Blog</title>
<meta name=keywords content="git">
<meta name=description content="Git教程-初版">
<meta name=author content="wrpota">
<link rel=canonical href=https://www.potawang.cn/post/git/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://www.potawang.cn/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<meta name=baidu-site-verification content="code-0ekyOXOMm0">
<script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?dcdb96e6d8ef04e6ae19d0a74a1063c6",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
<script>(function(){var a=document.createElement('script'),b;a.src='//push.zhanzhang.baidu.com/push.js',b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Git教程-初版">
<meta property="og:description" content="Git教程-初版">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.potawang.cn/post/git/"><meta property="og:image" content="https://www.potawang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-07-02T16:53:46+08:00">
<meta property="article:modified_time" content="2021-07-02T16:53:46+08:00"><meta property="og:site_name" content="Pota Blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://www.potawang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Git教程-初版">
<meta name=twitter:description content="Git教程-初版">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.potawang.cn/post/"},{"@type":"ListItem","position":2,"name":"Git教程-初版","item":"https://www.potawang.cn/post/git/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git教程-初版","name":"Git教程-初版","description":"Git教程-初版","keywords":["git"],"articleBody":"git简介 一：Git是什么？ Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。 工作原理 / 流程：\nWorkspace：工作区 Index / Stage：暂存区 Repository：仓库区（或本地仓库） Remote：远程仓库\n二：SVN与Git的最主要的区别？ SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而干活的时候，用的都是自己的电脑，所以首先要从中央服务器哪里得到最新的版本，然后干活，干完后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。 Git是分布式版本控制系统，那么它就没有中央服务器的，每个人的电脑就是一个完整的版本库，这样，工作的时候就不需要联网了，因为版本都是在自己的电脑上。既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。\n三：初始化设置 1. 设置用户名及邮箱信息   全局设置\ngit config --global user.name \"Name\" git config --global user.email \"Email\"   针对项目设置\ngit config user.name \"Name\" git config user.email \"Email\"   2. 设置换行符自动转换 git config --global core.autocrlf [true | input | false] # 全局设置 git config --local core.autocrlf [true | input | false] # 针对本项目设置  true 提交时转换为LF，检出时转换为CRLF input 提交时转换为LF，检出时不转换 false 提交与检出的代码都保持文件原有的换行符不变（不转换）  推荐设置:\n windows  git config --global core.autocrlf true  other OS  git config --global core.autocrlf input 初始化仓库  版本库又名仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。\n git init git add 初始化.md git commit Or git commit -m 版本管理 一、版本回退 1). 获取仓库当前log列表   使用 git log命令查看\n$ git log commit 310f02083e0bfd1762ddbd33664d01881cef8fd3 (HEAD - master) Author: Pota  Date: Wed Oct 21 17:57:12 2020 +0800 feat: 第三次改动 commit ff1eb142c143b9498d57ad3c8218bd62019d3f18 Author: Pota  Date: Wed Oct 21 17:56:53 2020 +0800 feat: 第二次改动 commit 62ea36c7ed237ec92d333a4fc5a5d2f7f929665e Author: Pota  Date: Wed Oct 21 17:56:24 2020 +0800 feat: 第一次改动 commit 25bae0398fc1fe2fb10add954fba4202f8142f32 Author: Pota  Date: Wed Oct 21 17:55:13 2020 +0800 feat: 首次提交 git log命令显示从最近到最远的提交日志，我们可以看到4次提交，如果嫌输出信息太多，看得眼花缭乱的，可以试试加上--pretty=oneline参数：\ngit log --pretty=oneline 310f02083e0bfd1762ddbd33664d01881cef8fd3 (HEAD - master) feat: 第三次改动 ff1eb142c143b9498d57ad3c8218bd62019d3f18 feat: 第二次改动 62ea36c7ed237ec92d333a4fc5a5d2f7f929665e feat: 第一次改动 25bae0398fc1fe2fb10add954fba4202f8142f32 feat: 首次提交   使用 IDE或图形化工具查看\n  2). 版本回退  版本回退仅限本地仓库中使用，若提交已push至远程仓库，则无法回退远程仓库内容\n  命令  git reset –-[soft | hard | mixed] commit_id   --soft、--mixed、--hard是三个恢复等级：\n--soft仅将头指针HEAD恢复，已经add的缓存以及工作空间的所有东西都不变；暂存区和工作区不会被切换；保留源码,只回退到commit 信息到某个版本.不涉及index的回退,如果还需要提交,直接commit即可。\n--mixed将头HEAD恢复掉，已经add的缓存也会丢失掉，工作空间的代码之类的不变；暂存区会更新至指定的commit，工作区不会受影响；会保留源码,只是将git commit和index 信息回退到了某个版本。\n--hard将一切全都恢复，头HEAD改变，add的缓存消失，代码等也恢复到以前状态；暂存区和工作区同时更新到指定的commit；源码也会回退到某个版本,commit和index 都回回退到某个版本.\n   注意事项\nreset --hard操作会导致当前缓存区和工作区的改动重置\nreset --mixed操作会导致当前缓存区的改动重置\n  分支管理 一、创建与合并分支 git 初始化后会默认创建master分支 开发过程中一般会采用多分支进行项目管理\n创建分支\ngit branch # 基于当前HEAD指向分支创建新分支 git checkout -b # 基于当前HEAD指向分支创建新分支并切换到该分支 git switch -c # 基于当前HEAD指向分支创建新分支并切换到该分支 切换分支\ngit checkout git switch 合并分支\ngit merge # 合并指定分支改动到当前分支 删除分支\ngit branch -d # 删除本地分支 git push origin -d # 删除远程分支 合并模式\n合并分支是默认使用Fast forward模式合并，合并后会丢失分支信息 使用--no-ff参数禁用Fast forward模式后合并会保留分支信息\n二、解决冲突  两个分支同一个文件都进行了提交导致节点无法连续后 合并会导致冲突\n 冲突产生后 **必须 ** 解决冲突后再次提交\n$ git merge develop Auto-merging readme.md CONFLICT (content): Merge conflict in readme.md Automatic merge failed; fix conflicts and then commit the result. $ git status On branch master You have unmerged paths. (fix conflicts and run \"git commit\") (use \"git merge --abort\" to abort the merge) Unmerged paths: (use \"git add ...\" to mark resolution) both modified: readme.md Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: \"\\346\\225\\231\\347\\250\\213.md\" no changes added to commit (use \"git add\" and/or \"git commit -a\") 查看readme.md文件后会发现git将冲突内容依据HEAD和冲突分支形式列出\n$ cat readme.md 第一次改动内容 第二次改动内容 第三次改动内容 ======= develop 第四次改动内容  develop 此时需要将冲突文件修改为合并后内容后再次添加到缓存区并提交\n$ cat readme.md 第一次改动内容 第二次改动内容 第三次改动内容 master:第四次改动内容 $ git add readme.md $ git commit -m\"第四次提交\" 此时git 主分支线路应该如下\n$ git log --graph --pretty=oneline --abbrev-commit * c6fba0d (HEAD - master) 第四次提交 |\\ | * 63fcc15 (develop) feat: 第四次改动 | * 55c58f4 feat: 第四次改动 * | 9de4e23 feat: 第四次改动 * | e2a6980 feat: 第四次改动 |/ * 983093c feat: 分支前教程 * 310f020 feat: 第三次改动 * ff1eb14 feat: 第二次改动 * 62ea36c feat: 第一次改动 * 25bae03 feat: 首次提交 三、rebase 命令说明 $ git rebase -i HEAD~4 pick 55c58f4 feat: 第四次改动 pick 63fcc15 feat: 第四次改动 pick 2f5f83d 第五次提交 pick 5abf70e 第六次提交 pick 5e96e00 feat: rebase前提交 # Rebase 9de4e23..5e96e00 onto 5abf70e (5 commands) # # Commands: # p, pick  = use commit # r, reword  = use commit, but edit the commit message # e, edit  = use commit, but stop for amending # s, squash  = use commit, but meld into previous commit # f, fixup  = like \"squash\", but discard this commit's log message # x, exec  = run command (the rest of the line) using shell # b, break = stop here (continue rebase later with 'git rebase --continue') # d, drop  = remove commit # l, label  = label current HEAD with a name # t, reset  = reset HEAD to a label # m, merge [-C  | -c ]  [# ] # . create a merge commit using the original merge commit's # . message (or the oneline, if no original merge commit was # . specified). Use -c  to reword the commit message. # # These lines can be re-ordered; they are executed from top to bottom. # # If you remove a line here THAT COMMIT WILL BE LOST. # # However, if you remove everything, the rebase will be aborted. # # Note that empty commits are commented out   pick\npick 只表示包含提交。 在变基进行时重新排列 pick 命令的顺序会更改提交的顺序。 如果选择不包含提交，应删除整行。\n  reword\nreword 命令类似于 pick，但在使用后，变基过程就会暂停，让您有机会改变提交消息。 提交所做的任何更改都不受影响。\n  edit\n如果选择 edit 提交，您将有机会修订提交，也就是说，可以完全添加或更改提交。 您也可以创建更多提交后再继续变基。 这样您可以将大提交拆分为小提交，或者删除在提交中执行错误更改。\n  squash\n此命令可用于将两个或以上的提交合并为一个。 下面的提交压缩到其上面的提交。 Git 让您有机会编写描述两次更改的新提交消息。\n  fixup\n这类似于 squash，但要合并的提交丢弃了其消息。 提交只是合并到其上面的提交，之前提交的消息用于描述两次更改。\n  exec\n这可让您对提交运行任意 shell 命令。\n  示例 假设当前git提交历史如下\n$ git log --pretty=oneline e85216ae5739c9eb1835a913b2c9449abd45ed74 这个提交移动到B文件提交前 046dfd07a3fc537871e837a8e5209a12ab37eaca 这个commit写错了 c50bd16a3ad4ef8b9cfc4ab5a7ee465609c1c976 文件A追加 de5cd71b26e94f137c7b202db0c4bee5600b2442 文件B修复 1bbbc6c8efa86e60aee2916dc46c173d1fea4f1d 文件B提交 8dbb92ae88b9d868a4817d8f25537bb83bf6c20c 文件A提交 $ git rebase -i HEAD~6 pick 8dbb92a 文件A提交 pick 1bbbc6c 文件B提交 pick de5cd71 文件B修复 pick c50bd16 文件A追加 pick 046dfd0 这个commit写错了 pick e85216a 这个提交移动到B文件提交前 # Rebase 412c835..e85216a onto c50bd16 (6 commands) 准备进行以下变更：\n 将c50bd16 压缩到8dbb92a中 将最后一个提交(e85216a)向上移动到文件B提交提交(1bbbc6c)之前，并保留为pick 将文件B修复提交(de5cd71)合并到文件B提交提交(1bbbc6c)中，并忽略提交消息 使用 reword 修复拼写错误的提交 (046dfd0) 的提交消息  将编辑器中文件修改为以下内容：\npick 8dbb92a 文件A提交 squash c50bd16 文件A追加 pick e85216a 这个提交移动到B文件提交前 pick 1bbbc6c 文件B提交 fixup de5cd71 文件B修复 reword 046dfd0 这个commit写错了 保存并关闭编辑器，开始交互式rebase\n  pick 8dbb92a命令因无内容改动被跳过\n  squash c50bd16命令因合并提交需手动修改 会打开默认编辑器进行改动如下：\n# This is a combination of 2 commits. # This is the 1st commit message: 文件A提交 # This is the commit message #2: 文件A追加 # Please enter the commit message for your changes. Lines starting # with '#' will be ignored, and an empty message aborts the commit. # # Date: Tue Oct16:07:46+0800 # # interactive rebase in progress; onto 412c835 # Last commands done (2 commands done): # pick 8dbb92a 文件A提交 # squash c50bd16 文件A追加 # Next commands to do (4 remaining commands): # pick e85216a 这个提交移动到B文件提交前 # pick 1bbbc6c 文件B提交 # You are currently rebasing branch 'master' on '412c835'. # # Changes to be committed: #▸ modified: a # 修改内容为想要的提交信息后保存文件\n# This is a combination of 2 commits. # This is the 1st commit message: 文件A提交 # This is the commit message #2: #文件A追加   pick e85216a 、pick 1bbbc6c 、fixup de5cd71因无需干预会自动进行，其中fixup de5cd71会将de5cd71提交合并到1bbbc6c中并舍弃commit信息\n  reword 046dfd0 会再次打开编辑器并显示一下信息：\n这个commit写错了 # Please enter the commit message for your changes. Lines starting # with '#' will be ignored, and an empty message aborts the commit. # # Date: Tue Oct 27 16:08:56 2020 +0800 # # interactive rebase in progress; onto 412c835 # Last commands done (6 commands done): # fixup de5cd71 文件B修复 # reword 046dfd0 这个commit写错了 # No commands remaining. # You are currently editing a commit while rebasing branch 'master' on '412c 835'. # # Changes to be committed: #▸ modified: c # 将内容改为想要的commit后保存 并完成此次rebase\n[detached HEAD 5a30ce2] 文件A提交 Date: Tue Oct 27 16:07:46 2020 +0800 1 file changed, 2 insertions(+) [detached HEAD 46eb136] 这个commit写错了 现在修复了 Date: Tue Oct 27 16:08:56 2020 +0800 1 file changed, 1 insertion(+) Successfully rebased and updated refs/heads/master.   在完成rebase后查看git历史\n$ git log --pretty=oneline 46eb136e6d0f70536069aa27dd603a27c8ceb4a1 这个commit写错了 现在修复了 0b17895ec112456d4e337f678bf1c2c95a85cd03 文件B提交 40b2e81db35a3e66fa4d57911df8a52dd5ff3c7b 这个提交移动到B文件提交前 5a30ce23ef594f73429ef7c77ffc0f09ceac01bf 文件A提交 412c83521248caafcfe89c1afeffb6de3551dc43 init 冲突解决 在rebase过程中如果遇到冲突 按照正常冲突解决过程一样 修改完成后使用命令\n$ git add  $ git rebase --continue 四、stash  当在某个分支正在进行某项修改时，此时出现了一个bug必须优先解决，这个时候需要切换到hot-fix分支进行bug媳妇，此时进行到一半的工作也不能提交，这个时候就需要将当前未完成的修改存储起来，等bug修改完成以后再继续进行修改\n 储藏你的工作 为了演示这一功能，你可以进入你的项目，在一些文件上进行工作，有可能还暂存其中一个变更。如果你运行 git status，你可以看到你的中间状态：\n$ git status On branch master Changes to be committed: (use \"git restore --staged ...\" to unstage) new file: d.txt Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: a 现在你想切换分支，但是你还不想提交你正在进行中的工作；所以你储藏这些变更。为了往堆栈推送一个新的储藏，只要运行 git stash：\n$ git stash Saved working directory and index state WIP on master: 46eb136 这个commit写错了 现在修复了 你的工作目录就干净了：\n$ git status On branch master nothing to commit, working tree clean 这时，你可以方便地切换到其他分支工作；你的变更都保存在栈上。要查看现有的储藏，你可以使用 git stash list：\n$ git stash list stash@{0}: WIP on master: 46eb136 这个commit写错了 现在修复了 使用储藏 当bug修复完成后回到develop分支想要继续之前的工作，此时使用 git stash apply即可将之前储藏的改动重新应用，默认情况下如果有多个储藏内容时git stash apply会默认使用最新的一条。如果想用更早的储藏，可以使用名字指定git stash apply stash@{0} \n$ git stash apply On branch master Changes to be committed: (use \"git restore --staged ...\" to unstage) new file: d.txt Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: a apply 选项只尝试应用储藏的工作——储藏的内容仍然在栈上。要移除它，你可以运行 git stash drop，加上你希望移除的储藏的名字：\n$ git stash list stash@{0}: WIP on master: 46eb136 这个commit写错了 现在修复了 $ git stash drop stash@{0} Dropped stash@{0} (2def785d0c921b679077086faefc40804212e732) 你也可以运行 git stash pop 来重新应用储藏，同时立刻将其从堆栈中移走。\n从储藏中创建分支 如果你储藏了一些工作，暂时不去理会，然后继续在你储藏工作的分支上工作，你在重新应用工作时可能会碰到一些问题。如果尝试应用的变更是针对一个你那之后修改过的文件，你会碰到一个归并冲突并且必须去化解它。如果你想用更方便的方法来重新检验你储藏的变更，你可以运行 git stash branch，这会创建一个新的分支，检出你储藏工作时的所处的提交，重新应用你的工作，如果成功，将会丢弃储藏。\n$ git stash branch testchanges Switched to a new branch 'testchanges' On branch testchanges Changes to be committed: (use \"git restore --staged ...\" to unstage) new file: d.txt Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: a Dropped refs/stash@{0} (5945c48cdc350188c675eb2f78c8dcdae72a5870) ","wordCount":"1366","inLanguage":"zh","datePublished":"2021-07-02T16:53:46+08:00","dateModified":"2021-07-02T16:53:46+08:00","author":{"@type":"Person","name":"wrpota"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.potawang.cn/post/git/"},"publisher":{"@type":"Organization","name":"Pota Blog","logo":{"@type":"ImageObject","url":"https://www.potawang.cn/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://www.potawang.cn/ accesskey=h title="Wrpota (Alt + H)">Wrpota</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://www.potawang.cn/categories title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://www.potawang.cn/tags title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://www.potawang.cn/search title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://www.potawang.cn/archives title=Archives>
<span>Archives</span>
</a>
</li>
<li>
<a href=https://www.potawang.cn/about title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://www.potawang.cn/>主页</a>&nbsp;»&nbsp;<a href=https://www.potawang.cn/post/>Posts</a></div>
<h1 class=post-title>
Git教程-初版
</h1>
<div class=post-description>
Git教程-初版
</div>
<div class=post-meta>July 2, 2021&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;wrpota
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<div class=details>目录</div>
</summary>
<div class=inner><ul>
<li>
<a href=#git%e7%ae%80%e4%bb%8b aria-label=git简介>git简介</a><ul>
<li>
<a href=#%e4%b8%80git%e6%98%af%e4%bb%80%e4%b9%88 aria-label=一：Git是什么？>一：Git是什么？</a></li>
<li>
<a href=#%e4%ba%8csvn%e4%b8%8egit%e7%9a%84%e6%9c%80%e4%b8%bb%e8%a6%81%e7%9a%84%e5%8c%ba%e5%88%ab aria-label=二：SVN与Git的最主要的区别？>二：SVN与Git的最主要的区别？</a></li>
<li>
<a href=#%e4%b8%89%e5%88%9d%e5%a7%8b%e5%8c%96%e8%ae%be%e7%bd%ae aria-label=三：初始化设置>三：初始化设置</a><ul>
<li>
<a href=#1-%e8%ae%be%e7%bd%ae%e7%94%a8%e6%88%b7%e5%90%8d%e5%8f%8a%e9%82%ae%e7%ae%b1%e4%bf%a1%e6%81%af aria-label="1. 设置用户名及邮箱信息">1. 设置用户名及邮箱信息</a></li>
<li>
<a href=#2-%e8%ae%be%e7%bd%ae%e6%8d%a2%e8%a1%8c%e7%ac%a6%e8%87%aa%e5%8a%a8%e8%bd%ac%e6%8d%a2 aria-label="2. 设置换行符自动转换">2. 设置换行符自动转换</a></li></ul>
</li></ul>
</li>
<li>
<a href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e4%bb%93%e5%ba%93 aria-label=初始化仓库>初始化仓库</a></li>
<li>
<a href=#%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label=版本管理>版本管理</a><ul>
<li>
<a href=#%e4%b8%80%e7%89%88%e6%9c%ac%e5%9b%9e%e9%80%80 aria-label=一、版本回退>一、版本回退</a><ul>
<li>
<a href=#1--%e8%8e%b7%e5%8f%96%e4%bb%93%e5%ba%93%e5%bd%93%e5%89%8dlog%e5%88%97%e8%a1%a8 aria-label="1).  获取仓库当前log列表">1). 获取仓库当前log列表</a></li>
<li>
<a href=#2-%e7%89%88%e6%9c%ac%e5%9b%9e%e9%80%80 aria-label="2). 版本回退">2). 版本回退</a></li></ul>
</li></ul>
</li>
<li>
<a href=#%e5%88%86%e6%94%af%e7%ae%a1%e7%90%86 aria-label=分支管理>分支管理</a><ul>
<li>
<a href=#%e4%b8%80%e5%88%9b%e5%bb%ba%e4%b8%8e%e5%90%88%e5%b9%b6%e5%88%86%e6%94%af aria-label=一、创建与合并分支>一、创建与合并分支</a></li>
<li>
<a href=#%e4%ba%8c%e8%a7%a3%e5%86%b3%e5%86%b2%e7%aa%81 aria-label=二、解决冲突>二、解决冲突</a></li>
<li>
<a href=#%e4%b8%89rebase aria-label=三、rebase>三、rebase</a><ul>
<li>
<a href=#%e5%91%bd%e4%bb%a4%e8%af%b4%e6%98%8e aria-label=命令说明>命令说明</a></li>
<li>
<a href=#%e7%a4%ba%e4%be%8b aria-label=示例>示例</a></li>
<li>
<a href=#%e5%86%b2%e7%aa%81%e8%a7%a3%e5%86%b3 aria-label=冲突解决>冲突解决</a></li></ul>
</li>
<li>
<a href=#%e5%9b%9bstash aria-label=四、stash>四、stash</a><ul>
<li>
<a href=#%e5%82%a8%e8%97%8f%e4%bd%a0%e7%9a%84%e5%b7%a5%e4%bd%9c aria-label=储藏你的工作>储藏你的工作</a></li>
<li>
<a href=#%e4%bd%bf%e7%94%a8%e5%82%a8%e8%97%8f aria-label=使用储藏>使用储藏</a></li>
<li>
<a href=#%e4%bb%8e%e5%82%a8%e8%97%8f%e4%b8%ad%e5%88%9b%e5%bb%ba%e5%88%86%e6%94%af aria-label=从储藏中创建分支>从储藏中创建分支</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h1 id=git简介>git简介<a hidden class=anchor aria-hidden=true href=#git简介>#</a></h1>
<h2 id=一git是什么>一：Git是什么？<a hidden class=anchor aria-hidden=true href=#一git是什么>#</a></h2>
<p>Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。
工作原理 / 流程：</p>
<p><img loading=lazy src=/image/image-20201021180535292.png alt=image-20201021180535292>
</p>
<p>Workspace：工作区
Index / Stage：暂存区
Repository：仓库区（或本地仓库）
Remote：远程仓库</p>
<h2 id=二svn与git的最主要的区别>二：SVN与Git的最主要的区别？<a hidden class=anchor aria-hidden=true href=#二svn与git的最主要的区别>#</a></h2>
<p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而干活的时候，用的都是自己的电脑，所以首先要从中央服务器哪里得到最新的版本，然后干活，干完后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。
Git是分布式版本控制系统，那么它就没有中央服务器的，每个人的电脑就是一个完整的版本库，这样，工作的时候就不需要联网了，因为版本都是在自己的电脑上。既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p>
<h2 id=三初始化设置>三：初始化设置<a hidden class=anchor aria-hidden=true href=#三初始化设置>#</a></h2>
<h3 id=1-设置用户名及邮箱信息>1. 设置用户名及邮箱信息<a hidden class=anchor aria-hidden=true href=#1-设置用户名及邮箱信息>#</a></h3>
<ul>
<li>
<p><strong>全局设置</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config --global user.name <span style=color:#e6db74>&#34;Name&#34;</span>
git config --global user.email <span style=color:#e6db74>&#34;Email&#34;</span>
</code></pre></div></li>
<li>
<p><strong>针对项目设置</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config user.name <span style=color:#e6db74>&#34;Name&#34;</span>
git config user.email <span style=color:#e6db74>&#34;Email&#34;</span>
</code></pre></div></li>
</ul>
<h3 id=2-设置换行符自动转换>2. 设置换行符自动转换<a hidden class=anchor aria-hidden=true href=#2-设置换行符自动转换>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config --global core.autocrlf  <span style=color:#f92672>[</span>true | input | false<span style=color:#f92672>]</span>  <span style=color:#75715e># 全局设置</span>
git config --local core.autocrlf  <span style=color:#f92672>[</span>true | input | false<span style=color:#f92672>]</span> <span style=color:#75715e># 针对本项目设置</span>
</code></pre></div><ul>
<li><code>true</code> 提交时转换为LF，检出时转换为CRLF</li>
<li><code>input</code> 提交时转换为LF，检出时不转换</li>
<li><code>false</code> 提交与检出的代码都保持文件原有的换行符不变（不转换）</li>
</ul>
<p><strong>推荐设置:</strong></p>
<ul>
<li><strong>windows</strong></li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config --global core.autocrlf true
</code></pre></div><ul>
<li><strong>other OS</strong></li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config --global core.autocrlf input
</code></pre></div><h1 id=初始化仓库>初始化仓库<a hidden class=anchor aria-hidden=true href=#初始化仓库>#</a></h1>
<blockquote>
<p>版本库又名仓库，英文名<strong>repository</strong>，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git init
git add 初始化.md
git commit Or git commit -m&lt;message&gt;
</code></pre></div><h1 id=版本管理>版本管理<a hidden class=anchor aria-hidden=true href=#版本管理>#</a></h1>
<h2 id=一版本回退>一、版本回退<a hidden class=anchor aria-hidden=true href=#一版本回退>#</a></h2>
<h3 id=1--获取仓库当前log列表>1). 获取仓库当前log列表<a hidden class=anchor aria-hidden=true href=#1--获取仓库当前log列表>#</a></h3>
<ol>
<li>
<p><strong>使用 <code>git log</code>命令查看</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git log
commit 310f02083e0bfd1762ddbd33664d01881cef8fd3 <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span>
Author: Pota &lt;951549518@qq.com&gt;
Date:   Wed Oct <span style=color:#ae81ff>21</span> 17:57:12 <span style=color:#ae81ff>2020</span> +0800

    feat: 第三次改动

commit ff1eb142c143b9498d57ad3c8218bd62019d3f18
Author: Pota &lt;951549518@qq.com&gt;
Date:   Wed Oct <span style=color:#ae81ff>21</span> 17:56:53 <span style=color:#ae81ff>2020</span> +0800

    feat: 第二次改动

commit 62ea36c7ed237ec92d333a4fc5a5d2f7f929665e
Author: Pota &lt;951549518@qq.com&gt;
Date:   Wed Oct <span style=color:#ae81ff>21</span> 17:56:24 <span style=color:#ae81ff>2020</span> +0800

    feat: 第一次改动

commit 25bae0398fc1fe2fb10add954fba4202f8142f32
Author: Pota &lt;951549518@qq.com&gt;
Date:   Wed Oct <span style=color:#ae81ff>21</span> 17:55:13 <span style=color:#ae81ff>2020</span> +0800

    feat: 首次提交
</code></pre></div><p><code>git log</code>命令显示从最近到最远的提交日志，我们可以看到4次提交，如果嫌输出信息太多，看得眼花缭乱的，可以试试加上<code>--pretty=oneline</code>参数：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git log --pretty<span style=color:#f92672>=</span>oneline
310f02083e0bfd1762ddbd33664d01881cef8fd3 <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> feat: 第三次改动
ff1eb142c143b9498d57ad3c8218bd62019d3f18 feat: 第二次改动
62ea36c7ed237ec92d333a4fc5a5d2f7f929665e feat: 第一次改动
25bae0398fc1fe2fb10add954fba4202f8142f32 feat: 首次提交
</code></pre></div></li>
<li>
<p><strong>使用 IDE或图形化工具查看</strong></p>
<p><img loading=lazy src=/image/image-20201021181624441.png alt=image-20201021181624441>
</p>
</li>
</ol>
<h3 id=2-版本回退>2). 版本回退<a hidden class=anchor aria-hidden=true href=#2-版本回退>#</a></h3>
<blockquote>
<p>版本回退仅限本地仓库中使用，若提交已push至远程仓库，则无法回退远程仓库内容</p>
</blockquote>
<ol>
<li><strong>命令</strong></li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git reset –-<span style=color:#f92672>[</span>soft | hard | mixed<span style=color:#f92672>]</span> commit_id
</code></pre></div><ul>
<li>
<p><code>--soft</code>、<code>--mixed</code>、<code>--hard</code>是三个恢复等级：</p>
<p><code>--soft</code>仅将头指针HEAD恢复，已经add的缓存以及工作空间的所有东西都不变；暂存区和工作区不会被切换；保留源码,只回退到commit 信息到某个版本.不涉及index的回退,如果还需要提交,直接commit即可。</p>
<p><code>--mixed</code>将头HEAD恢复掉，已经add的缓存也会丢失掉，工作空间的代码之类的不变；暂存区会更新至指定的commit，工作区不会受影响；会保留源码,只是将git commit和index
信息回退到了某个版本。</p>
<p><code>--hard</code>将一切全都恢复，头HEAD改变，add的缓存消失，代码等也恢复到以前状态；暂存区和工作区同时更新到指定的commit；源码也会回退到某个版本,commit和index 都回回退到某个版本.</p>
</li>
</ul>
<ol start=2>
<li>
<p><strong>注意事项</strong></p>
<p><code>reset --hard</code>操作会导致当前缓存区和工作区的改动重置</p>
<p><code>reset --mixed</code>操作会导致当前缓存区的改动重置</p>
</li>
</ol>
<h1 id=分支管理>分支管理<a hidden class=anchor aria-hidden=true href=#分支管理>#</a></h1>
<h2 id=一创建与合并分支>一、创建与合并分支<a hidden class=anchor aria-hidden=true href=#一创建与合并分支>#</a></h2>
<p>git 初始化后会默认创建<code>master</code>分支 开发过程中一般会采用多分支进行项目管理</p>
<p><strong>创建分支</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git branch &lt;branch name&gt;      <span style=color:#75715e># 基于当前HEAD指向分支创建新分支</span>
git checkout -b &lt;branch name&gt; <span style=color:#75715e># 基于当前HEAD指向分支创建新分支并切换到该分支</span>
git switch -c &lt;barnch name&gt;   <span style=color:#75715e># 基于当前HEAD指向分支创建新分支并切换到该分支</span>
</code></pre></div><p><strong>切换分支</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git checkout &lt;branch name&gt;
git switch &lt;branch name&gt;
</code></pre></div><p><strong>合并分支</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git merge &lt;branch name&gt; <span style=color:#75715e># 合并指定分支改动到当前分支</span>
</code></pre></div><p><strong>删除分支</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git branch -d &lt;branch name&gt;  <span style=color:#75715e># 删除本地分支</span>
git push origin -d &lt;branch name&gt;  <span style=color:#75715e># 删除远程分支</span>
</code></pre></div><p><strong>合并模式</strong></p>
<p>合并分支是默认使用<strong>Fast forward</strong>模式合并，合并后会丢失分支信息 使用<code>--no-ff</code>参数禁用<strong>Fast forward</strong>模式后合并会保留分支信息</p>
<p><img loading=lazy src=/image/image-20201022164115495.png alt=image-20201022164115495>
</p>
<h2 id=二解决冲突>二、解决冲突<a hidden class=anchor aria-hidden=true href=#二解决冲突>#</a></h2>
<blockquote>
<p>两个分支同一个文件都进行了提交导致节点无法连续后 合并会导致冲突</p>
</blockquote>
<p>冲突产生后 **必须 ** 解决冲突后再次提交</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git merge develop
Auto-merging readme.md
CONFLICT <span style=color:#f92672>(</span>content<span style=color:#f92672>)</span>: Merge conflict in readme.md
Automatic merge failed; fix conflicts and <span style=color:#66d9ef>then</span> commit the result.

$ git status
On branch master
You have unmerged paths.
  <span style=color:#f92672>(</span>fix conflicts and run <span style=color:#e6db74>&#34;git commit&#34;</span><span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git merge --abort&#34;</span> to abort the merge<span style=color:#f92672>)</span>

Unmerged paths:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add &lt;file&gt;...&#34;</span> to mark resolution<span style=color:#f92672>)</span>
	both modified:   readme.md

Changes not staged <span style=color:#66d9ef>for</span> commit:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span style=color:#f92672>)</span>
	modified:   <span style=color:#e6db74>&#34;\346\225\231\347\250\213.md&#34;</span>

no changes added to commit <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add&#34;</span> and/or <span style=color:#e6db74>&#34;git commit -a&#34;</span><span style=color:#f92672>)</span>
</code></pre></div><p><strong>查看readme.md文件后会发现<code>git</code>将冲突内容依据<code>HEAD</code>和冲突分支形式列出</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ cat readme.md
第一次改动内容

第二次改动内容

第三次改动内容

<span style=color:#f92672>&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD
master:第四次改动内容
<span style=color:#f92672>=======</span>
develop 第四次改动内容
&gt;&gt;&gt;&gt;&gt;&gt;&gt; develop
</code></pre></div><p><strong>此时需要将冲突文件修改为合并后内容后再次添加到缓存区并提交</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ cat readme.md
第一次改动内容

第二次改动内容

第三次改动内容

master:第四次改动内容

$ git add readme.md
$ git commit -m<span style=color:#e6db74>&#34;第四次提交&#34;</span>
</code></pre></div><p><strong>此时git 主分支线路应该如下</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git log --graph --pretty<span style=color:#f92672>=</span>oneline --abbrev-commit
*   c6fba0d <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> 第四次提交
|<span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>| * 63fcc15 <span style=color:#f92672>(</span>develop<span style=color:#f92672>)</span> feat: 第四次改动
| * 55c58f4 feat: 第四次改动
* | 9de4e23 feat: 第四次改动
* | e2a6980 feat: 第四次改动
|/
* 983093c feat: 分支前教程
* 310f020 feat: 第三次改动
* ff1eb14 feat: 第二次改动
* 62ea36c feat: 第一次改动
* 25bae03 feat: 首次提交
</code></pre></div><h2 id=三rebase>三、rebase<a hidden class=anchor aria-hidden=true href=#三rebase>#</a></h2>
<h3 id=命令说明>命令说明<a hidden class=anchor aria-hidden=true href=#命令说明>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git rebase -i HEAD~4

pick 55c58f4 feat: 第四次改动
pick 63fcc15 feat: 第四次改动
pick 2f5f83d 第五次提交
pick 5abf70e 第六次提交
pick 5e96e00 feat: rebase前提交

<span style=color:#75715e># Rebase 9de4e23..5e96e00 onto 5abf70e (5 commands)</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Commands:</span>
<span style=color:#75715e># p, pick &lt;commit&gt; = use commit</span>
<span style=color:#75715e># r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
<span style=color:#75715e># e, edit &lt;commit&gt; = use commit, but stop for amending</span>
<span style=color:#75715e># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
<span style=color:#75715e># f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message</span>
<span style=color:#75715e># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span>
<span style=color:#75715e># b, break = stop here (continue rebase later with &#39;git rebase --continue&#39;)</span>
<span style=color:#75715e># d, drop &lt;commit&gt; = remove commit</span>
<span style=color:#75715e># l, label &lt;label&gt; = label current HEAD with a name</span>
<span style=color:#75715e># t, reset &lt;label&gt; = reset HEAD to a label</span>
<span style=color:#75715e># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span>
<span style=color:#75715e># .       create a merge commit using the original merge commit&#39;s</span>
<span style=color:#75715e># .       message (or the oneline, if no original merge commit was</span>
<span style=color:#75715e># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># These lines can be re-ordered; they are executed from top to bottom.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># However, if you remove everything, the rebase will be aborted.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Note that empty commits are commented out</span>
</code></pre></div><ul>
<li>
<p><code>pick</code></p>
<p><code>pick</code> 只表示包含提交。 在变基进行时重新排列 <code>pick</code> 命令的顺序会更改提交的顺序。 如果选择不包含提交，应删除整行。</p>
</li>
<li>
<p><code>reword</code></p>
<p><code>reword</code> 命令类似于 <code>pick</code>，但在使用后，变基过程就会暂停，让您有机会改变提交消息。 提交所做的任何更改都不受影响。</p>
</li>
<li>
<p><code>edit</code></p>
<p>如果选择 <code>edit</code> 提交，您将有机会修订提交，也就是说，可以完全添加或更改提交。 您也可以创建更多提交后再继续变基。 这样您可以将大提交拆分为小提交，或者删除在提交中执行错误更改。</p>
</li>
<li>
<p><code>squash</code></p>
<p>此命令可用于将两个或以上的提交合并为一个。 下面的提交压缩到其上面的提交。 Git 让您有机会编写描述两次更改的新提交消息。</p>
</li>
<li>
<p><code>fixup</code></p>
<p>这类似于 <code>squash</code>，但要合并的提交丢弃了其消息。 提交只是合并到其上面的提交，之前提交的消息用于描述两次更改。</p>
</li>
<li>
<p><code>exec</code></p>
<p>这可让您对提交运行任意 shell 命令。</p>
</li>
</ul>
<h3 id=示例>示例<a hidden class=anchor aria-hidden=true href=#示例>#</a></h3>
<p>假设当前git提交历史如下</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git log --pretty<span style=color:#f92672>=</span>oneline
e85216ae5739c9eb1835a913b2c9449abd45ed74 这个提交移动到B文件提交前
046dfd07a3fc537871e837a8e5209a12ab37eaca 这个commit写错了
c50bd16a3ad4ef8b9cfc4ab5a7ee465609c1c976 文件A追加
de5cd71b26e94f137c7b202db0c4bee5600b2442 文件B修复
1bbbc6c8efa86e60aee2916dc46c173d1fea4f1d 文件B提交
8dbb92ae88b9d868a4817d8f25537bb83bf6c20c 文件A提交

$ git rebase -i HEAD~6
pick 8dbb92a 文件A提交
pick 1bbbc6c 文件B提交
pick de5cd71 文件B修复
pick c50bd16 文件A追加
pick 046dfd0 这个commit写错了
pick e85216a 这个提交移动到B文件提交前

<span style=color:#75715e># Rebase 412c835..e85216a onto c50bd16 (6 commands)</span>
</code></pre></div><p><strong>准备进行以下变更：</strong></p>
<ul>
<li>将<code>c50bd16</code> 压缩到<code>8dbb92a</code>中</li>
<li>将最后一个提交(<code>e85216a</code>)向上移动到<code>文件B提交</code>提交(<code>1bbbc6c</code>)之前，并保留为<code>pick</code></li>
<li>将<code>文件B修复</code>提交(<code>de5cd71</code>)合并到<code>文件B提交</code>提交(<code>1bbbc6c</code>)中，并忽略提交消息</li>
<li>使用 <code>reword</code> 修复拼写错误的提交 (<code>046dfd0</code>) 的提交消息</li>
</ul>
<p><strong>将编辑器中文件修改为以下内容：</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>pick 8dbb92a 文件A提交
squash c50bd16 文件A追加
pick e85216a 这个提交移动到B文件提交前
pick 1bbbc6c 文件B提交
fixup de5cd71 文件B修复
reword 046dfd0 这个commit写错了
</code></pre></div><p><strong>保存并关闭编辑器，开始交互式rebase</strong></p>
<ol>
<li>
<p><code>pick 8dbb92a</code>命令因无内容改动被跳过</p>
</li>
<li>
<p><code>squash c50bd16</code>命令因合并提交需手动修改 会打开默认编辑器进行改动如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e># This is a combination of 2 commits.</span>
<span style=color:#75715e># This is the 1st commit message:</span>

文件A提交

<span style=color:#75715e># This is the commit message #2:</span>

文件A追加

<span style=color:#75715e># Please enter the commit message for your changes. Lines starting</span>
<span style=color:#75715e># with &#39;#&#39; will be ignored, and an empty message aborts the commit.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Date:      Tue Oct16:07:46+0800</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># interactive rebase in progress; onto 412c835</span>
<span style=color:#75715e># Last commands done (2 commands done):</span>
<span style=color:#75715e>#    pick 8dbb92a 文件A提交</span>
<span style=color:#75715e>#    squash c50bd16 文件A追加</span>
<span style=color:#75715e># Next commands to do (4 remaining commands):</span>
<span style=color:#75715e>#    pick e85216a 这个提交移动到B文件提交前</span>
<span style=color:#75715e>#    pick 1bbbc6c 文件B提交</span>
<span style=color:#75715e># You are currently rebasing branch &#39;master&#39; on &#39;412c835&#39;.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Changes to be committed:</span>
<span style=color:#75715e>#▸      modified:   a</span>
<span style=color:#75715e>#</span>
</code></pre></div><p>修改内容为想要的提交信息后保存文件</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e># This is a combination of 2 commits.</span>
<span style=color:#75715e># This is the 1st commit message:</span>
文件A提交
<span style=color:#75715e># This is the commit message #2:</span>
<span style=color:#75715e>#文件A追加</span>
</code></pre></div></li>
<li>
<p><code>pick e85216a</code> 、<code>pick 1bbbc6c</code> 、<code>fixup de5cd71</code>因无需干预会自动进行，其中<code>fixup de5cd71</code>会将<code>de5cd71</code>提交合并到<code>1bbbc6c</code>中并舍弃commit信息</p>
</li>
<li>
<p><code>reword 046dfd0</code> 会再次打开编辑器并显示一下信息：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>这个commit写错了

<span style=color:#75715e># Please enter the commit message for your changes. Lines starting</span>
<span style=color:#75715e># with &#39;#&#39; will be ignored, and an empty message aborts the commit.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Date:      Tue Oct 27 16:08:56 2020 +0800</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># interactive rebase in progress; onto 412c835</span>
<span style=color:#75715e># Last commands done (6 commands done):</span>
<span style=color:#75715e>#    fixup de5cd71 文件B修复</span>
<span style=color:#75715e>#    reword 046dfd0 这个commit写错了</span>
<span style=color:#75715e># No commands remaining.</span>
<span style=color:#75715e># You are currently editing a commit while rebasing branch &#39;master&#39; on &#39;412c    835&#39;.</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e># Changes to be committed:</span>
<span style=color:#75715e>#▸      modified:   c</span>
<span style=color:#75715e>#</span>
</code></pre></div><p>将内容改为想要的commit后保存 并完成此次rebase</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>detached HEAD 5a30ce2<span style=color:#f92672>]</span> 文件A提交
 Date: Tue Oct <span style=color:#ae81ff>27</span> 16:07:46 <span style=color:#ae81ff>2020</span> +0800
 <span style=color:#ae81ff>1</span> file changed, <span style=color:#ae81ff>2</span> insertions<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>
<span style=color:#f92672>[</span>detached HEAD 46eb136<span style=color:#f92672>]</span> 这个commit写错了 现在修复了
 Date: Tue Oct <span style=color:#ae81ff>27</span> 16:08:56 <span style=color:#ae81ff>2020</span> +0800
 <span style=color:#ae81ff>1</span> file changed, <span style=color:#ae81ff>1</span> insertion<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>
Successfully rebased and updated refs/heads/master.
</code></pre></div></li>
</ol>
<p><strong>在完成rebase后查看git历史</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git log --pretty<span style=color:#f92672>=</span>oneline

46eb136e6d0f70536069aa27dd603a27c8ceb4a1 这个commit写错了 现在修复了
0b17895ec112456d4e337f678bf1c2c95a85cd03 文件B提交
40b2e81db35a3e66fa4d57911df8a52dd5ff3c7b 这个提交移动到B文件提交前
5a30ce23ef594f73429ef7c77ffc0f09ceac01bf 文件A提交
412c83521248caafcfe89c1afeffb6de3551dc43 init
</code></pre></div><h3 id=冲突解决>冲突解决<a hidden class=anchor aria-hidden=true href=#冲突解决>#</a></h3>
<p>在rebase过程中如果遇到冲突 按照正常冲突解决过程一样 修改完成后使用命令</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git add &lt;file&gt;
$ git rebase --continue
</code></pre></div><h2 id=四stash>四、stash<a hidden class=anchor aria-hidden=true href=#四stash>#</a></h2>
<blockquote>
<p>当在某个分支正在进行某项修改时，此时出现了一个bug必须优先解决，这个时候需要切换到hot-fix分支进行bug媳妇，此时进行到一半的工作也不能提交，这个时候就需要将当前未完成的修改存储起来，等bug修改完成以后再继续进行修改</p>
</blockquote>
<h3 id=储藏你的工作>储藏你的工作<a hidden class=anchor aria-hidden=true href=#储藏你的工作>#</a></h3>
<p>为了演示这一功能，你可以进入你的项目，在一些文件上进行工作，有可能还暂存其中一个变更。如果你运行 <code>git status</code>，你可以看到你的中间状态：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git status
On branch master
Changes to be committed:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style=color:#f92672>)</span>
	new file:   d.txt

Changes not staged <span style=color:#66d9ef>for</span> commit:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span style=color:#f92672>)</span>
	modified:   a
</code></pre></div><p>现在你想切换分支，但是你还不想提交你正在进行中的工作；所以你储藏这些变更。为了往堆栈推送一个新的储藏，只要运行 <code>git stash</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git stash
Saved working directory and index state WIP on master: 46eb136 这个commit写错了 现在修复了
</code></pre></div><p>你的工作目录就干净了：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git status
On branch master
nothing to commit, working tree clean
</code></pre></div><p>这时，你可以方便地切换到其他分支工作；你的变更都保存在栈上。要查看现有的储藏，你可以使用 <code>git stash list</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git stash list
stash@<span style=color:#f92672>{</span>0<span style=color:#f92672>}</span>: WIP on master: 46eb136 这个commit写错了 现在修复了
</code></pre></div><h3 id=使用储藏>使用储藏<a hidden class=anchor aria-hidden=true href=#使用储藏>#</a></h3>
<p>当bug修复完成后回到develop分支想要继续之前的工作，此时使用 <code>git stash apply</code>即可将之前储藏的改动重新应用，默认情况下如果有多个储藏内容时<code>git stash apply</code>会默认使用最新的一条。如果想用更早的储藏，可以使用名字指定<code>git stash apply stash@{0} </code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ git stash apply
On branch master
Changes to be committed:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style=color:#f92672>)</span>
	new file:   d.txt

Changes not staged <span style=color:#66d9ef>for</span> commit:
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span style=color:#f92672>)</span>
	modified:   a
</code></pre></div><p><strong><code>apply</code></strong> 选项只尝试应用储藏的工作——储藏的内容仍然在栈上。要移除它，你可以运行 <code>git stash drop</code>，加上你希望移除的储藏的名字：</p>
<pre tabindex=0><code>$ git stash list
stash@{0}: WIP on master: 46eb136 这个commit写错了 现在修复了
$ git stash drop stash@{0}
Dropped stash@{0} (2def785d0c921b679077086faefc40804212e732)
</code></pre><p>你也可以运行 <code>git stash pop</code> 来重新应用储藏，同时立刻将其从堆栈中移走。</p>
<h3 id=从储藏中创建分支>从储藏中创建分支<a hidden class=anchor aria-hidden=true href=#从储藏中创建分支>#</a></h3>
<p>如果你储藏了一些工作，暂时不去理会，然后继续在你储藏工作的分支上工作，你在重新应用工作时可能会碰到一些问题。如果尝试应用的变更是针对一个你那之后修改过的文件，你会碰到一个归并冲突并且必须去化解它。如果你想用更方便的方法来重新检验你储藏的变更，你可以运行 <code>git stash branch</code>，这会创建一个新的分支，检出你储藏工作时的所处的提交，重新应用你的工作，如果成功，将会丢弃储藏。</p>
<pre tabindex=0><code>$ git stash branch testchanges
Switched to a new branch 'testchanges'
On branch testchanges
Changes to be committed:
  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
	new file:   d.txt

Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
	modified:   a

Dropped refs/stash@{0} (5945c48cdc350188c675eb2f78c8dcdae72a5870)
</code></pre>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://www.potawang.cn/tags/git/>git</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://www.potawang.cn/post/macos_k8s/>
<span class=title>« 上一页</span>
<br>
<span>Macos 安装k8s</span>
</a>
<a class=next href=https://www.potawang.cn/post/git%E8%A7%84%E8%8C%83/>
<span class=title>下一页 »</span>
<br>
<span>Git规范-初版</span>
</a>
</nav>
</footer><div id=utter-container></div>
<script src=https://utteranc.es/client.js repo=wrpota/wrpota.github.io issue-term=title theme=github-light crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://www.potawang.cn/>Pota Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
<span>
<a href=https://beian.miit.gov.cn/#/Integrated/index target=_blank>苏ICP备18012635号</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='复制';function d(){a.innerText='已复制！',setTimeout(()=>{a.innerText='复制'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>